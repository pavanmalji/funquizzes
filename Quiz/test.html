<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Quiz for fun</title>
    <link rel="stylesheet" href="../Shared/css/foundation.css">
    <script src="../Shared/js/vendor/custom.modernizr.js"></script>
</head>
<body>

    <div class="row">
        <div class="panel">
            <h1 class="text-center">Fun Quiz</h1>
        </div>
    </div>

    <div id="page-content">

    </div>

    <div class="row">
        <div class="panel">
            <p class="copyright text-center">&copy; 2013 No Ink. No rights deserved.</p>
        </div>
    </div>

    <script>
        document.write('<script src=' +
        ('__proto__' in {} ? '../Shared/js/vendor/zepto' : '../Shared/js/vendor/jquery') +
        '.js><\/script>')
    </script>

    <script src="../Shared/js/foundation.min.js"></script>
    <script src="../Shared/js/knockout-2.2.0.js"></script>
    <script src="../Shared/js/models.js"></script>
    <script src="../Shared/js/vm-login-register.js"></script>

    <script>
        $(document).foundation();
        $(document).ready(function () {
            setSessionUser(JSON.stringify(user));
            loadPageContent();
        });
    </script>

    <script>
        function loadPageContent() {
            var userdata = getSessionUser();
            var page = defaultpage;
            
            $.each(userstates, function (key, userstate) {
                if (userstate.name == userdata.state) {
                    page = userstate.fragment;
                }
            });

            $.get(page, function (data) {
                $("#page-content").html(data);
                applyKOBindings(userdata.state + "KOBindingCallback()");
            });
        }

        function applyKOBindings(KOBindingCallback) {
            ko.cleanNode($("#page-content")[0]);
            setTimeout(KOBindingCallback, 100);
        }

    </script>
</body>
</html>
